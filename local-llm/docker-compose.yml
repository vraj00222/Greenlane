version: "3.8"

services:
  executorch-llm:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: greenlane-executorch
    ports:
      - "8765:8765"
    volumes:
      # Mount the model files (2.3GB .pte won't be in the image)
      - ./models/Llama-3.2-1B-ET:/app/models/Llama-3.2-1B-ET:ro
    environment:
      - PORT=8765
      - DOCKER_ENV=true
    restart: unless-stopped
    # Apple Silicon optimizations
    platform: linux/arm64
